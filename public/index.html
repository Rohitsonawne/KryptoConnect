<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KryptoConnect - Secure Crypto Chat</title>

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Socket.io Client -->
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <i class="fas fa-comments"></i>
      </div>
      <h1>KryptoConnect</h1>
      <p class="tagline">Secure, encrypted chat for the crypto community</p>
    </header>

    <div class="app-container">
      <!-- Authentication Section -->
      <section class="auth-section" id="authSection">
        <!-- LOGIN -->
        <div class="auth-form" id="loginForm">
          <h2>Welcome Back</h2>
          <p class="subtitle">Log in to continue chatting securely</p>

          <div class="form-group">
            <label for="loginUsername">Username</label>
            <input type="text" id="loginUsername" placeholder="Enter your username" />
          </div>
          <div class="form-group">
            <label for="loginPassword">Password</label>
            <input type="password" id="loginPassword" placeholder="Enter your password" />
          </div>

          <button class="btn" id="loginBtn">Login</button>
          <div class="error-message" id="loginError"></div>

          <div class="auth-links">
            <a href="forgot.html">Forgot password?</a>
          </div>

          <div class="divider">or continue with</div>
          <div class="social-login">
            <button type="button" class="social-btn google">
              <i class="fab fa-google"></i> Google
            </button>
            <button type="button" class="social-btn facebook">
              <i class="fab fa-facebook-f"></i> Facebook
            </button>
          </div>

          <div class="auth-toggle">
            Don’t have an account?
            <span id="showRegister">Sign up</span>
          </div>
        </div>

        <!-- REGISTER -->
        <div class="auth-form" id="registerForm" style="display: none;">
          <h2>Create Account</h2>
          <p class="subtitle">Join the secure crypto chat network</p>

          <div class="form-group">
            <label for="regUsername">Username</label>
            <input type="text" id="regUsername" placeholder="Choose a username" />
          </div>

          <div class="form-group">
            <label for="regEmailPhone">Email or Phone</label>
            <input type="text" id="regEmailPhone" placeholder="Enter your email or phone" />
          </div>

          <div class="form-group">
            <label for="regPassword">Password</label>
            <input type="password" id="regPassword" placeholder="Create a password" />
          </div>
          <div class="form-group">
            <label for="regConfirmPassword">Confirm Password</label>
            <input type="password" id="regConfirmPassword" placeholder="Confirm your password" />
          </div>

          <button class="btn" id="registerBtn">Sign Up</button>
          <div class="error-message" id="regError"></div>

          <div class="divider">or continue with</div>
          <div class="social-login">
            <button type="button" class="social-btn google">
              <i class="fab fa-google"></i> Google
            </button>
            <button type="button" class="social-btn facebook">
              <i class="fab fa-facebook-f"></i> Facebook
            </button>
          </div>

          <div class="auth-toggle">
            Already have an account?
            <span id="showLogin">Login</span>
          </div>
        </div>
      </section>

      <!-- CHAT SECTION -->
      <section class="chat-section" id="chatSection" style="display: none;">
        <div class="chat-header">
          <div class="chat-title">KryptoConnect Chat</div>
          <div class="user-info">
            <div class="user-avatar" id="userAvatar">U</div>
            <span id="usernameDisplay">User</span>
            <button class="logout-btn" id="logoutBtn">Logout</button>
          </div>
        </div>

        <div class="chat-container">
          <div class="sidebar">
            <div class="sidebar-section">
              <h3 class="sidebar-title">
                My Friends
                <button class="add-friend-btn" id="addFriendBtn" title="Add Friend">
                  <i class="fas fa-user-plus"></i>
                </button>
              </h3>
              <ul class="users-list" id="friendsList"></ul>
            </div>

            <div class="sidebar-section">
              <h3 class="sidebar-title">All Users</h3>
              <ul class="users-list" id="usersList"></ul>
            </div>
          </div>

          <div class="chat-main">
            <div class="chat-with-info" id="chatWithInfo" style="display: none;">
              <div style="display: flex; align-items: center; gap: 10px;">
                <div class="user-status"></div>
                <span id="chatWithName">User</span>
              </div>
              <div class="chat-actions">
                <button class="btn-secondary" id="clearChatBtn">Clear Chat</button>
              </div>
            </div>

            <div class="messages-container" id="messagesContainer">
              <div class="no-chat-selected" id="noChatSelected">
                <div>
                  <i class="fas fa-comments" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.5;"></i>
                  <h3>Welcome to KryptoConnect!</h3>
                  <p>Select a friend from your list to start chatting or add new friends using the + button.</p>
                </div>
              </div>
            </div>

            <div class="typing-indicator" id="typingIndicator"></div>

            <!-- MESSAGE INPUT & FILE UPLOAD -->
            <div class="message-input-container">
              <div class="file-upload-container" id="fileUploadContainer" style="display: none;">
                <div class="file-input-wrapper">
                  <input type="file" class="file-input" id="fileInput" accept="*/*" />
                </div>
                <button class="upload-btn" id="uploadBtn" disabled>
                  <i class="fas fa-upload"></i> Upload
                </button>
              </div>

              <div class="file-preview" id="filePreview">
                <div class="file-info">
                  <i class="fas fa-file file-icon" id="filePreviewIcon"></i>
                  <div class="file-details">
                    <div class="file-name" id="filePreviewName">filename.ext</div>
                    <div class="file-size" id="filePreviewSize">0 MB</div>
                  </div>
                  <button class="file-remove" id="fileRemoveBtn">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
                <img src="" class="file-preview-image" id="filePreviewImage" alt="File preview" />
                <div class="upload-progress">
                  <div class="progress-bar" id="uploadProgressBar"></div>
                </div>
              </div>

              <div class="upload-info" id="uploadInfo">
                Maximum file size: 100MB • Supported: Images, Videos, Documents
              </div>

              <div style="display: flex; gap: 10px; width: 100%;">
                <button class="btn-secondary" id="attachFileBtn" style="white-space: nowrap;">
                  <i class="fas fa-paperclip"></i>
                </button>
                <input type="text" class="message-input" id="messageInput" placeholder="Select a friend to start chatting..." disabled />
                <button class="send-btn" id="sendBtn" disabled>
                  <i class="fas fa-paper-plane"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Features Section -->
    <div class="features">
      <div class="feature-card">
        <div class="feature-icon"><i class="fas fa-lock"></i></div>
        <h3 class="feature-title">End-to-End Encryption</h3>
        <p>Your messages are secured with military-grade encryption. Only you and the recipient can read them.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon"><i class="fas fa-user-friends"></i></div>
        <h3 class="feature-title">Friends System</h3>
        <p>Add friends to your network and chat privately with ease.</p>
      </div>

      <div class="feature-card">
        <div class="feature-icon"><i class="fas fa-bolt"></i></div>
        <h3 class="feature-title">Real-time Chat</h3>
        <p>Experience lightning-fast, live crypto conversations.</p>
      </div>
    </div>

    <!-- Add Friend Modal -->
    <div class="modal" id="addFriendModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Add Friend</h3>
          <button class="close-modal" id="closeModal">&times;</button>
        </div>
        <div class="form-group">
          <label for="friendUsername">Username</label>
          <input type="text" id="friendUsername" placeholder="Enter username to add" />
        </div>
        <button class="btn" id="sendFriendRequestBtn">Send Request</button>
        <div class="error-message" id="friendError"></div>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script src="client.js"></script>
</body>
</html>
